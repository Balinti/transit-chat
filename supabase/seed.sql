-- TransitPulse Demo Seed Data
-- Run after schema.sql and rls.sql

-- Insert demo agency
INSERT INTO agencies (id, name, short_name, timezone)
VALUES (
  '00000000-0000-0000-0000-000000000001',
  'Metro Transit Authority',
  'MTA',
  'America/New_York'
) ON CONFLICT (id) DO NOTHING;

-- Insert demo routes
INSERT INTO routes (id, agency_id, route_short_name, route_long_name, route_type, route_color)
VALUES
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0000-000000000001', 'Red', 'Red Line', 'rail', '#FF0000'),
  ('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0000-000000000001', 'Blue', 'Blue Line', 'rail', '#0000FF'),
  ('00000000-0000-0000-0001-000000000003', '00000000-0000-0000-0000-000000000001', 'Green', 'Green Line', 'rail', '#00AA00'),
  ('00000000-0000-0000-0001-000000000004', '00000000-0000-0000-0000-000000000001', 'Orange', 'Orange Line', 'rail', '#FF8800'),
  ('00000000-0000-0000-0001-000000000005', '00000000-0000-0000-0000-000000000001', '42', 'Crosstown Bus', 'bus', '#666666')
ON CONFLICT (id) DO NOTHING;

-- Insert demo stops
INSERT INTO stops (id, agency_id, stop_name, stop_code)
VALUES
  ('00000000-0000-0000-0002-000000000001', '00000000-0000-0000-0000-000000000001', 'Central Station', 'CTRL'),
  ('00000000-0000-0000-0002-000000000002', '00000000-0000-0000-0000-000000000001', 'Union Square', 'UNSQ'),
  ('00000000-0000-0000-0002-000000000003', '00000000-0000-0000-0000-000000000001', 'City Hall', 'CHAL'),
  ('00000000-0000-0000-0002-000000000004', '00000000-0000-0000-0000-000000000001', 'Park Street', 'PARK'),
  ('00000000-0000-0000-0002-000000000005', '00000000-0000-0000-0000-000000000001', 'Downtown Crossing', 'DTWN'),
  ('00000000-0000-0000-0002-000000000006', '00000000-0000-0000-0000-000000000001', 'Airport Terminal', 'AIRP'),
  ('00000000-0000-0000-0002-000000000007', '00000000-0000-0000-0000-000000000001', 'Harbor View', 'HARB'),
  ('00000000-0000-0000-0002-000000000008', '00000000-0000-0000-0000-000000000001', 'University', 'UNIV'),
  ('00000000-0000-0000-0002-000000000009', '00000000-0000-0000-0000-000000000001', 'Medical Center', 'MEDC'),
  ('00000000-0000-0000-0002-000000000010', '00000000-0000-0000-0000-000000000001', 'Sports Arena', 'SPRT')
ON CONFLICT (id) DO NOTHING;

-- Insert route stops for Red Line (both directions)
INSERT INTO route_stops (route_id, stop_id, direction_id, stop_sequence)
VALUES
  -- Red Line Northbound (direction 0)
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000006', 0, 1),
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000007', 0, 2),
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000005', 0, 3),
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000001', 0, 4),
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000004', 0, 5),
  -- Red Line Southbound (direction 1)
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000004', 1, 1),
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000001', 1, 2),
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000005', 1, 3),
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000007', 1, 4),
  ('00000000-0000-0000-0001-000000000001', '00000000-0000-0000-0002-000000000006', 1, 5),
  -- Blue Line Northbound
  ('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0002-000000000002', 0, 1),
  ('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0002-000000000003', 0, 2),
  ('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0002-000000000001', 0, 3),
  ('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0002-000000000008', 0, 4),
  -- Blue Line Southbound
  ('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0002-000000000008', 1, 1),
  ('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0002-000000000001', 1, 2),
  ('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0002-000000000003', 1, 3),
  ('00000000-0000-0000-0001-000000000002', '00000000-0000-0000-0002-000000000002', 1, 4),
  -- Green Line
  ('00000000-0000-0000-0001-000000000003', '00000000-0000-0000-0002-000000000009', 0, 1),
  ('00000000-0000-0000-0001-000000000003', '00000000-0000-0000-0002-000000000001', 0, 2),
  ('00000000-0000-0000-0001-000000000003', '00000000-0000-0000-0002-000000000010', 0, 3),
  ('00000000-0000-0000-0001-000000000003', '00000000-0000-0000-0002-000000000010', 1, 1),
  ('00000000-0000-0000-0001-000000000003', '00000000-0000-0000-0002-000000000001', 1, 2),
  ('00000000-0000-0000-0001-000000000003', '00000000-0000-0000-0002-000000000009', 1, 3)
ON CONFLICT DO NOTHING;

-- Insert sample broadcasts
INSERT INTO operator_broadcasts (id, agency_id, route_id, category, title, message, status, starts_at, ends_at)
VALUES
  (
    '00000000-0000-0000-0003-000000000001',
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0001-000000000001',
    'SERVICE_ALERT',
    'Red Line Service Advisory',
    'Due to scheduled maintenance, expect minor delays on the Red Line between 10 PM and 5 AM this week.',
    'ACTIVE',
    NOW(),
    NOW() + INTERVAL '7 days'
  ),
  (
    '00000000-0000-0000-0003-000000000002',
    '00000000-0000-0000-0000-000000000001',
    NULL,
    'GENERAL',
    'Holiday Schedule in Effect',
    'Please note that holiday schedules are in effect. Check our website for detailed timetables.',
    'ACTIVE',
    NOW(),
    NOW() + INTERVAL '2 days'
  ),
  (
    '00000000-0000-0000-0003-000000000003',
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0001-000000000002',
    'ELEVATOR_ESCALATOR',
    'Escalator Out of Service',
    'The northbound escalator at Union Square is currently out of service. Please use the elevator or stairs.',
    'ACTIVE',
    NOW(),
    NOW() + INTERVAL '3 days'
  )
ON CONFLICT (id) DO NOTHING;

-- Insert a sample incident for demo purposes
INSERT INTO incidents (id, agency_id, route_id, direction_id, stop_id, type, status, score, confidence, confirmations_count, last_report_at)
VALUES
  (
    '00000000-0000-0000-0004-000000000001',
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0001-000000000001',
    0,
    '00000000-0000-0000-0002-000000000001',
    'CROWDING_HIGH',
    'UNVERIFIED',
    65.0,
    'MEDIUM',
    3,
    NOW() - INTERVAL '10 minutes'
  )
ON CONFLICT (id) DO NOTHING;
